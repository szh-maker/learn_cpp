# 万能引用和引用折叠

所谓的万能引用是因为发生了类型推导，在 T&& 和 auto&& 的初始化过程中都会发生类型的推导。在这个推导过程中，初始化的源对象如果是一个左值，则目标对象会推导出左值引用；反之如果源对象是一个右值，则会推导出右值引用，不过无论如何都是是一个引用类型。

万能引用能灵活地引用对象，实际上是因为在 C++11 中添加了一套引用折叠加推导地规则——引用折叠。

| 类型模板 | T 实际类型 | 最终类型 |
| :------- | ---------- | -------- |
| T&       | R          | R&       |
| T&       | R&         | R&       |
| T&       | R&&        | R&       |
| T&&      | R          | R&&      |
| T&&      | R&         | R&       |
| T&&      | R&&        | R&&      |

上面表格显示了引用折叠的推导规则，可以看出在整个推导过程中，只要有左值引用参与进来，最后推导的结果就是一个左值引用。只有实际类型是一个非引用类型或者右值引用类型时，最后推导出来的才是一个右值引用。